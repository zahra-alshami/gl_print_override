{% include "templates/includes/formats/common_format" %}
<style>
  /* keep all styles print-friendly and scoped */
  .gl-report { font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; }
  .gl-report .report-header { margin-bottom: 10px; }
  .gl-report table { width: 100%; border-collapse: collapse; }
  .gl-report th, .gl-report td { padding: 6px 8px; border: 1px solid #ddd; }
  .gl-report th { background: #f5f5f5; text-align: left; }
  .text-right { text-align: right; }
  @media print { body { font-size: 11pt; } }
</style>

<div class="gl-report">
  <div class="report-header">
    <h2><%= report.print_title || report.report_name %></h2>
    <div>
	<h1>custom print format</h1>
      <strong>Company:</strong> <%= filters.company || "-" %>
      &nbsp;&nbsp;|&nbsp;&nbsp;
      <strong>Account:</strong> <%= filters.account || __('All Accounts') %>
      &nbsp;&nbsp;|&nbsp;&nbsp;
      <strong>From:</strong> <%= filters.from_date || "-" %>
      &nbsp;&nbsp;|&nbsp;&nbsp;
      <strong>To:</strong> <%= filters.to_date || "-" %>
    </div>
  </div>

  <table>
    <thead>
      <tr>
        <th><%= __('Posting Date') %></th>
        <th><%= __('Account') %></th>
        <th><%= __('Voucher') %></th>
        <th><%= __('Against Account') %></th>
        <th class="text-right"><%= __('Debit') %></th>
        <th class="text-right"><%= __('Credit') %></th>
        <th class="text-right"><%= __('Balance') %></th>
      </tr>
    </thead>
    <tbody>
      <% var running_balance = 0.0; var total_debit = 0.0; var total_credit = 0.0; %>
      <% for (var i=0; i < data.length; i++) { %>
        <% var row = data[i]; %>
        <% var debit = parseFloat(row.debit || 0) || 0; %>
        <% var credit = parseFloat(row.credit || 0) || 0; %>
        <% running_balance += (debit - credit); %>
        <% total_debit += debit; %>
        <% total_credit += credit; %>

        <tr>
          <td><%= row.posting_date || '' %></td>
          <td><%= row.account || '' %></td>
          <td><%= (row.voucher_type ? row.voucher_type + ' ' : '') + (row.voucher_no || '') %></td>
          <td><%= row.against || row.against_account || '' %></td>
          <td class="text-right"><%= fmt_money(row.debit || 0) %></td>
          <td class="text-right"><%= fmt_money(row.credit || 0) %></td>
          <td class="text-right"><%= fmt_money(running_balance) %></td>
        </tr>
      <% } %>
    </tbody>
    <tfoot>
      <tr>
        <th colspan="4" class="text-right"><%= __('Totals') %></th>
        <th class="text-right"><%= fmt_money(total_debit) %></th>
        <th class="text-right"><%= fmt_money(total_credit) %></th>
        <th class="text-right"><%= fmt_money(running_balance) %></th>
      </tr>
    </tfoot>
  </table>

  <div style="margin-top:18px; font-size:10px; color:#666">
    <div><%= __('Printed On') %>: <%= (new Date()).toLocaleString() %></div>
    <div><%= __('Generated by') %>: <%= frappe.session && frappe.session.user || '' %></div>
  </div>
</div>
